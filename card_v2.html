<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Thông tin tham dự</title><style>
  :root {
    --brand: #0B5ED7;
    --accent: #C06000;
    --bg: #fff;
    --text: #0f172a;
  }

  * { box-sizing: border-box; }

  body {
    margin: 0;
    background: var(--bg);
    font-family: 'Noto Sans', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color: var(--text);
  }

  .wrap {
    width: 80mm;            /* bề ngang hóa đơn */
    margin: 0 auto;
    padding: 6px 8px;       /* giảm lề trong */
  }

  .card {
    background: #fff;
    border-radius: 8px;
    box-shadow: none;
    overflow: hidden;
    page-break-inside: avoid; /* tránh cắt giữa khi in */
  }

  .head {
    background: linear-gradient(90deg, var(--brand), #4dabf7);
    padding: 8px 10px;
    color: #fff;
    text-align: left;
  }

  .name {
    font-size: 20px;
    font-weight: 900;
    line-height: 1.2;
  }

  .role {
    font-size: 13px;
    color: #ffe8cc;
    font-weight: 600;
  }

  .body {
    padding: 6px 10px;
    font-size: 13px;
  }

  .row {
    display: flex;
    justify-content: space-between;
    margin: 3px 0;
  }

  .label { color: #475569; }
  .val { font-weight: 700; }

  .raffle {
    margin: 8px 0;
    padding: 8px 10px;
    border: 1.5px dashed var(--accent);
    border-radius: 8px;
    background: #fff7ed;
    text-align: center;
  }

  .raffle .cap {
    font-size: 10px;
    color: #9a3412;
    font-weight: 700;
    text-transform: uppercase;
  }

  .raffle .code {
    font-size: 22px;
    font-weight: 900;
    letter-spacing: 1px;
    color: #7c2d12;
  }

  .footer {
    padding: 4px 10px 8px;
    border-top: 1px solid #e2e8f0;
    font-size: 10px;
    color: #64748b;
    text-align: center;
  }

  .badge {
    display: inline-block;
    background: #e7f1ff;
    color: #0b5ed7;
    font-weight: 700;
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 999px;
    margin-top: 2px;
  }

  @media print {
    body {
      width: 80mm;
      margin: 0 auto;
    }
    .wrap {
      width: 80mm;
      padding: 0;
    }
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="head">
        <div class="name" id="name">Tên nhân sự</div>
        <div class="role" id="role">Chức danh</div>
      </div>
      <div class="body">
        <div class="row"><div class="label">STT</div><div class="val" id="stt">—</div></div>
        <div class="row"><div class="label">Số người thân đi kèm</div><div class="val" id="songuoi">—</div></div>
        <div class="raffle">
          <div class="cap">Mã dự thưởng (SĐT)</div>
          <div class="code" id="code">—</div>
        </div>
      </div>
      <div class="footer">
        <div>Quét bởi QR • Trang hiển thị nội bộ</div>
        <div class="badge" id="ts"></div>
      </div>
    </div>
  </div>
<script>
  function getParam(key){
    const u=new URL(window.location.href);
    return u.searchParams.get(key)||"";
  }
  function decodePlus(s){
    try{
      return decodeURIComponent((s||"").replace(/\+/g,'%20'));
    }catch(e){return s}
  }
  const stt=decodePlus(getParam('stt'));
  const ten=decodePlus(getParam('ten'));
  const role=decodePlus(getParam('chucdanh')||getParam('role'));
  const phone=(getParam('sdt')||getParam('phone')||"").replace(/\s+/g,'');
  const songuoi=decodePlus(getParam('songuoi')||getParam('nguoi')||getParam('so'));
  document.getElementById('stt').textContent=stt||'—';
  document.getElementById('name').textContent=ten||'—';
  document.getElementById('role').textContent=role||'';
  document.getElementById('code').textContent=phone||'—';
  document.getElementById('songuoi').textContent=songuoi||'—';
  document.getElementById('ts').textContent=new Date().toLocaleString();
  document.title = (ten?ten:'Thông tin tham dự') + (role?(' — '+role):'');
</script>
</body>
</html>
